<!-- Full page blog post with navigation -->
<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title><%= post.Title %> - American Veterans Rebuilding</title>
  <meta name="description" content="<%= if (post.MetaDescription != "") { %><%= post.MetaDescription %><% } else { %><%= truncate(stripTags(post.Content), {"size": 160}) %><% } %>">
  <meta name="keywords" content="<%= post.MetaKeywords %>">
  <meta property="og:title" content="<%= post.Title %> - American Veterans Rebuilding">
  <meta property="og:description" content="<%= if (post.MetaDescription != "") { %><%= post.MetaDescription %><% } else { %><%= truncate(stripTags(post.Content), {"size": 160}) %><% } %>">  <%= if (post.Image != "") { %>
  <meta property="og:image" content="<%= post.Image %>">
  <% } else { %>
  <meta property="og:image" content="/images/logo.avif">
  <% } %>
  <meta property="og:url" content="<%= getCurrentURL(c) %>/blog/<%= post.Slug %>">
  <meta property="og:type" content="article">
  <meta property="article:published_time" content="<%= post.CreatedAt.Format("2006-01-02T15:04:05Z07:00") %>">
  <meta property="article:modified_time" content="<%= post.UpdatedAt.Format("2006-01-02T15:04:05Z07:00") %>">
  <meta name="twitter:card" content="summary_large_image">
  
  <!-- Pico.css -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/custom.css">
  
  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  
  <!-- Favicon -->
  <link rel="icon" href="/images/logo.avif" type="image/avif">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "<%= post.Title %>",
    "description": "<%= if (post.MetaDescription != "") { %><%= post.MetaDescription %><% } else { %><%= truncate(stripTags(post.Content), {"size": 160}) %><% } %>",
    "image": "<%= if (post.Image != "") { %><%= post.Image %><% } else { %>/images/logo.avif<% } %>",
    "author": {
      "@type": "Person",
      "name": "<%= if (post.User.FirstName != "") { %><%= post.User.FirstName %> <%= post.User.LastName %><% } else { %>American Veterans Rebuilding<% } %>"
    },
    "publisher": {
      "@type": "Organization",
      "name": "American Veterans Rebuilding",
      "logo": {
        "@type": "ImageObject",
        "url": "/images/logo.avif"
      }
    },
    "datePublished": "<%= post.CreatedAt.Format("2006-01-02T15:04:05Z07:00") %>",
    "dateModified": "<%= post.UpdatedAt.Format("2006-01-02T15:04:05Z07:00") %>",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "<%= getCurrentURL(c) %>/blog/<%= post.Slug %>"
    }
  }
  </script>
</head>

<body>
  <!-- AVR Header -->
  <header class="avr-header">
    <div class="header-grid">
      <div class="header-left">
        <img src="/images/Armed-Services-Logos.avif" alt="American Veterans Rebuilding" class="armed-services-logo">
      </div>
      <div class="header-center">
        <img src="/images/logo.avif" alt="AVRNPO" class="main-logo">
        <p class="tagline">Rebuilding the American Veteran's Self, Family and Community.</p>
      </div>
      <div class="header-right">
        <a href="https://www.facebook.com/AmericanVeteransRebuilding" target="_blank" class="social-icon">
          <img src="/images/Facebook.svg" alt="Facebook">
        </a>
        <a href="https://x.com/avrnpo" target="_blank" class="social-icon">
          <img src="/images/XIcon.png" alt="X">
        </a>
        <a href="https://discord.com/invite/f6TzKart7J" target="_blank" class="social-icon">
          <img src="/images/Discord.svg" alt="Discord">
        </a>
        <a href="https://open.spotify.com/show/5BBarK2chVBVPCbqrILO73" target="_blank" class="social-icon">
          <img src="/images/Spotify.svg" alt="Spotify">
        </a>
      </div>
    </div>
  </header>

  <!-- AVR Navigation -->
  <nav class="avr-navigation" hx-preserve="true">
    <div class="nav-links">
      <a href="/" hx-get="/" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true" role="button" class="secondary outline">Mission</a>
      <a href="/blog" hx-get="/blog" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true" role="button" class="outline">Updates</a>
      <a href="/team" hx-get="/team" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true" role="button" class="secondary outline">Team</a>
      <a href="/projects" hx-get="/projects" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true" role="button" class="secondary outline">Projects</a>
      <a href="/donate" hx-get="/donate" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true" role="button" class="secondary outline">Donate</a>
      <a href="/contact" hx-get="/contact" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true" role="button" class="secondary outline">Contact</a>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container" id="htmx-content">
    <%= partial("blog/show.plush.html") %>
  </main>

  <!-- Footer -->
  <%= partial("home/_footer.plush.html") %>

  <!-- Theme Toggle Script -->
  <script>
    // Initialize theme
    const savedTheme = localStorage.getItem('picoPreferredColorScheme');
    if (savedTheme) {
      document.documentElement.setAttribute('data-theme', savedTheme);
    }
  </script>
</body>
</html>
