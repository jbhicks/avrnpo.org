<!-- Blog index partial for HTMX loading -->
<section class="blog-hero" style="text-align: center; padding: 2rem 0; margin-bottom: 2rem;">
  <img src="/images/logo.avif" alt="American Veterans Rebuilding Logo" style="max-width: 120px; margin-bottom: 1rem;">
  <h1>Updates & Stories</h1>
  <p style="font-size: 1.2rem; color: var(--pico-primary); margin-bottom: 2rem;">
    Stay informed about our veteran support programs, success stories, and community impact.
  </p>
</section>

<%= if (len(posts) > 0) { %>
  <!-- Featured Post -->
  <%= if (len(posts) > 0) { %>
  <section class="featured-post" style="margin-bottom: 3rem;">
    <article style="border: 1px solid var(--pico-muted-border-color); border-radius: var(--pico-border-radius); padding: 2rem;">
      <header>        <%= if (posts[0].ImageURL != "") { %>
        <img src="<%= posts[0].ImageURL %>" alt="<%= posts[0].Title %>" style="width: 100%; height: 300px; object-fit: cover; border-radius: var(--pico-border-radius); margin-bottom: 1rem;">
        <% } %>
        <hgroup>
          <h2><a href="/blog/<%= posts[0].Slug %>" hx-get="/blog/<%= posts[0].Slug %>" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true"><%= posts[0].Title %></a></h2>
          <small>
            <%= if (posts[0].User.FirstName != "") { %>
            By <%= posts[0].User.FirstName %> <%= posts[0].User.LastName %> â€¢ 
            <% } %>
            <%= posts[0].CreatedAt.Format("January 2, 2006") %>
          </small>
        </hgroup>
      </header>
      
      <p style="font-size: 1.125rem; line-height: 1.6;"><%= truncate(stripTags(posts[0].Content), {"size": 300}) %></p>
      
      <footer>
        <a href="/blog/<%= posts[0].Slug %>" hx-get="/blog/<%= posts[0].Slug %>" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true" role="button">Read Full Story</a>
        <a href="/donate" role="button" class="contrast">Support Our Mission</a>
      </footer>
    </article>
  </section>
  <% } %>

  <!-- Recent Posts Grid -->  <%= if (len(posts) > 1) { %>
  <section class="recent-posts">
    <h2>Recent Updates</h2>
    <div class="posts-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 2rem;">
      <%= for (i, post) in posts { %>
        <%= if (i > 0) { %>
          <%= partial("blog/_post_card.plush.html", {post: post}) %>
        <% } %>
      <% } %>
    </div>
  </section>
  <% } %>

<% } else { %>
  <!-- No posts available -->
  <section style="text-align: center; padding: 3rem 0;">
    <h2>Coming Soon</h2>
    <p>We're preparing inspiring veteran stories and program updates to share with you.</p>
    <p>In the meantime, learn more about our mission and how you can support American veterans.</p>
    <a href="/team" role="button" class="secondary">Meet Our Team</a>
    <a href="/donate" role="button" class="contrast">Make a Donation</a>
  </section>
<% } %>

<!-- Call to Action Section -->
<section class="blog-cta" style="background-color: var(--pico-card-background-color); padding: 2rem; border-radius: var(--pico-border-radius); margin-top: 3rem; text-align: center;">
  <h3>Support American Veterans</h3>
  <p>Every donation helps us provide technical training, occupational licensing, and home ownership opportunities to veterans in need.</p>
  <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
    <a href="/donate" role="button" class="contrast">Donate Now</a>
    <a href="/contact" role="button" class="secondary">Get Involved</a>
  </div>
</section>
