<!-- Post Content (HTMX Partial) -->
<header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
  <div>
    <h1><%= post.Title %></h1>
    <p style="color: var(--pico-muted-color); margin: 0;">
      <% if (post.Published) { %>
        <span style="color: var(--pico-primary); font-weight: bold;">Published</span>
      <% } else { %>
        <span style="color: var(--pico-secondary); font-weight: bold;">Draft</span>
      <% } %>
      ‚Ä¢
      Created <%= dateFormat(post.CreatedAt, "Jan 2, 2006") %>
      <% if (post.UpdatedAt.After(post.CreatedAt)) { %>
        ‚Ä¢ Updated <%= dateFormat(post.UpdatedAt, "Jan 2, 2006") %>
      <% } %>
    </p>
  </div>
  <div style="display: flex; gap: 0.5rem;">
    <a href="/admin/posts" role="button" class="outline" hx-get="/admin/posts" hx-target="#main-content" hx-push-url="true">‚Üê Back to Posts</a>
    <a href="/admin/posts/<%= post.ID %>/edit" role="button" class="secondary" 
       hx-get="/admin/posts/<%= post.ID %>/edit" hx-target="#main-content" hx-push-url="true">Edit Post</a>
    <a href="/blog/<%= post.Slug %>" target="_blank" role="button" class="outline">View Live</a>
  </div>
</header>

<div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
  <!-- Main Content -->
  <article>
    <% if (post.Image != "") { %>
      <img src="<%= post.Image %>" alt="<%= post.ImageAlt %>" style="width: 100%; height: 300px; object-fit: cover; border-radius: var(--pico-border-radius); margin-bottom: 1rem;">
    <% } %>
    
    <% if (post.Excerpt != "") { %>
      <div style="background-color: var(--pico-card-background-color); padding: 1rem; border-radius: var(--pico-border-radius); margin-bottom: 1rem; border-left: 4px solid var(--pico-primary);">
        <strong>Excerpt:</strong><br>
        <%= post.Excerpt %>
      </div>
    <% } %>

    <div class="post-content">
      <%= raw(post.Content) %>
    </div>
  </article>

  <!-- Sidebar - Post Details -->
  <aside style="background-color: var(--pico-card-background-color); padding: 1.5rem; border-radius: var(--pico-border-radius); height: fit-content;">
    <h3 style="margin-top: 0;">Post Details</h3>
    
    <div style="margin-bottom: 1rem;">
      <strong>Status:</strong><br>
      <% if (post.Published) { %>
        <span style="color: green;">‚úì Published</span>
        <% if (!post.PublishedAt.IsZero()) { %>
          <br><small>Published on <%= dateFormat(post.PublishedAt, "Jan 2, 2006 at 3:04 PM") %></small>
        <% } %>
      <% } else { %>
        <span style="color: orange;">üìù Draft</span>
      <% } %>
    </div>

    <div style="margin-bottom: 1rem;">
      <strong>Author:</strong><br>
      <% if (post.User.FirstName != "" || post.User.LastName != "") { %>
        <%= post.User.FirstName %> <%= post.User.LastName %>
      <% } else { %>
        <%= post.User.Email %>
      <% } %>
    </div>

    <div style="margin-bottom: 1rem;">
      <strong>Slug:</strong><br>
      <code><%= post.Slug %></code>
    </div>

    <div style="margin-bottom: 1rem;">
      <strong>Created:</strong><br>
      <%= dateFormat(post.CreatedAt, "Jan 2, 2006 at 3:04 PM") %>
    </div>

    <% if (post.UpdatedAt.After(post.CreatedAt)) { %>
    <div style="margin-bottom: 1rem;">
      <strong>Last Updated:</strong><br>
      <%= dateFormat(post.UpdatedAt, "Jan 2, 2006 at 3:04 PM") %>
    </div>
    <% } %>

    <!-- SEO Information -->
    <% if (post.MetaTitle != "" || post.MetaDescription != "" || post.MetaKeywords != "") { %>
    <hr>
    <h4>SEO Information</h4>
    
    <% if (post.MetaTitle != "") { %>
    <div style="margin-bottom: 1rem;">
      <strong>Meta Title:</strong><br>
      <small><%= post.MetaTitle %></small>
    </div>
    <% } %>

    <% if (post.MetaDescription != "") { %>
    <div style="margin-bottom: 1rem;">
      <strong>Meta Description:</strong><br>
      <small><%= post.MetaDescription %></small>
    </div>
    <% } %>

    <% if (post.MetaKeywords != "") { %>
    <div style="margin-bottom: 1rem;">
      <strong>Keywords:</strong><br>
      <small><%= post.MetaKeywords %></small>
    </div>
    <% } %>
    <% } %>

    <!-- Social Media -->
    <% if (post.OgTitle != "" || post.OgDescription != "" || post.OgImage != "") { %>
    <hr>
    <h4>Social Media</h4>
    
    <% if (post.OgTitle != "") { %>
    <div style="margin-bottom: 1rem;">
      <strong>Social Title:</strong><br>
      <small><%= post.OgTitle %></small>
    </div>
    <% } %>

    <% if (post.OgDescription != "") { %>
    <div style="margin-bottom: 1rem;">
      <strong>Social Description:</strong><br>
      <small><%= post.OgDescription %></small>
    </div>
    <% } %>

    <% if (post.OgImage != "") { %>
    <div style="margin-bottom: 1rem;">
      <strong>Social Image:</strong><br>
      <img src="<%= post.OgImage %>" alt="Social sharing image" style="width: 100%; border-radius: var(--pico-border-radius);">
    </div>
    <% } %>
    <% } %>

    <!-- Actions -->
    <hr>
    <div style="display: flex; flex-direction: column; gap: 0.5rem;">
      <button type="button" class="outline" style="color: red; border-color: red;" 
              hx-delete="/admin/posts/<%= post.ID %>" 
              hx-confirm="Are you sure you want to delete this post? This action cannot be undone."
              hx-target="#main-content"
              hx-push-url="/admin/posts">Delete Post</button>
    </div>
  </aside>
</div>
