<!-- Edit Post Form (HTMX Partial) -->
<header style="margin-bottom: 2rem;">
  <nav style="margin-bottom: 1rem;">
    <a href="/admin/posts" hx-get="/admin/posts" hx-target="#main-content" hx-push-url="true">← Back to Posts</a>
  </nav>
  <div style="display: flex; justify-content: space-between; align-items: start;">
    <div>
      <h1>Edit Post</h1>
      <p>Updating: <strong><%= post.Title %></strong></p>
    </div>
    <div style="display: flex; gap: 0.5rem;">
      <a href="/admin/posts/<%= post.ID %>" role="button" class="outline" hx-get="/admin/posts/<%= post.ID %>" hx-target="#main-content" hx-push-url="true">← View Post</a>
      <a href="/blog/<%= post.Slug %>" role="button" class="outline" target="_blank">Preview Live</a>
    </div>
  </div>
</header>

<%= if (errors) { %>
<div style="background-color: var(--pico-del-background-color); border: 1px solid var(--pico-del-color); border-radius: var(--pico-border-radius); padding: 1rem; margin-bottom: 2rem;">
  <h4 style="margin-top: 0; color: var(--pico-del-color);">Please fix the following errors:</h4>
  <ul style="margin-bottom: 0;">
    <%= for (key, messages) in errors { %>
      <%= for (message) in messages { %>
      <li><%= message %></li>
      <% } %>
    <% } %>
  </ul>
</div>
<% } %>

<form hx-put="/admin/posts/<%= post.ID %>" hx-target="#main-content" hx-push-url="true" enctype="multipart/form-data">
  <% if (authenticity_token) { %>
    <input type="hidden" name="authenticity_token" value="<%= authenticity_token %>">
  <% } %>
  
  <%= partial("admin/posts/form") %>
  
  <!-- Form Actions -->
  <div style="display: flex; gap: 1rem; justify-content: space-between; padding-top: 2rem; border-top: 1px solid var(--pico-muted-border-color);">
    <button type="button" class="outline" style="color: red; border-color: red;" 
            hx-delete="/admin/posts/<%= post.ID %>" 
            hx-confirm="Are you sure you want to delete this post? This action cannot be undone."
            hx-target="#main-content"
            hx-push-url="/admin/posts">Delete Post</button>
    
    <div style="display: flex; gap: 1rem;">
      <a href="/admin/posts/<%= post.ID %>" role="button" class="outline" hx-get="/admin/posts/<%= post.ID %>" hx-target="#main-content" hx-push-url="true">Cancel</a>
      <button type="submit" class="primary">Update Post</button>
    </div>
  </div>
</form>
