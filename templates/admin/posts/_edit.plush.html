<!-- Edit Post Form (HTMX Partial) -->
<header class="mb-4">
    <nav class="mb-2">
        <a
            href="/admin/posts"
           
           
           
            >← Back to Posts</a
        >
    </nav>
    <div class="admin-header-start">
        <div>
            <h1>Edit Post</h1>
            <p>Updating: <strong><%= post.Title %></strong></p>
        </div>
        <div class="flex flex-gap-sm">
            <a
                href="/admin/posts/<%= post.ID %>"
                role="button"
                class="outline"
               
               
               
                >← View Post</a
            >
            <a
                href="/blog/<%= post.Slug %>"
                role="button"
                class="outline"
                target="_blank"
                >Preview Live</a
            >
        </div>
    </div>
</header>

<%= if (errors) { %>
<div class="error-box">
    <h4>Please fix the following errors:</h4>
    <ul>
        <%= for (key, messages) in errors { %> <%= for (message) in messages {
        %>
        <li><%= message %></li>
        <% } %> <% } %>
    </ul>
</div>
<% } %>

<form
   
   
   
   
    enctype="multipart/form-data"
>
    <%= csrf() %> <%= partial("admin/posts/form") %>

    <!-- Form Actions -->
    <div class="form-actions between">
        <form action="/admin/posts/<%= post.ID %>" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this post?');">
            <%= csrf() %>
            <input type="hidden" name="_method" value="DELETE">
            <button type="submit" class="outline btn-danger">
                Delete Post
            </button>
        </form>

        <div class="flex flex-gap">
            <a
                href="/admin/posts/<%= post.ID %>"
                role="button"
                class="outline"
               
               
               
                >Cancel</a
            >
            <button type="submit" class="primary">Update Post</button>
        </div>
    </div>
</form>
