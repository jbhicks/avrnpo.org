<!-- New Post Form (HTMX Partial) -->
<header class="mb-4">
    <nav class="mb-2">
        <a
            href="/admin/posts"
            hx-get="/admin/posts"
            hx-target="#main-content"
            hx-push-url="true"
            >‚Üê Back to Posts</a
        >
    </nav>
    <h1>Create New Post</h1>
    <p>Share veteran success stories, program updates, and community impact.</p>
</header>

<%= if (errors) { %>
<div class="error-box">
    <h4>Please fix the following errors:</h4>
    <ul>
        <%= for (key, messages) in errors { %> <%= for (message) in messages {
        %>
        <li><%= message %></li>
        <% } %> <% } %>
    </ul>
</div>
<% } %>

<form
    hx-post="/admin/posts"
    hx-target="body"
    hx-swap="outerHTML"
    hx-push-url="true"
    enctype="multipart/form-data"
>
    <% if (authenticity_token) { %>
    <input
        type="hidden"
        name="authenticity_token"
        value="<%= authenticity_token %>"
    />
    <% } %> <%= partial("admin/posts/form") %>

    <!-- Form Actions -->
    <div class="form-actions">
        <a
            href="/admin/posts"
            role="button"
            class="outline"
            hx-get="/admin/posts"
            hx-target="#main-content"
            hx-push-url="true"
            >Cancel</a
        >
        <button type="submit" class="primary">Create Post</button>
    </div>
</form>
