<!-- Admin Users Management -->
<div class="admin-grid">
    <!-- Admin Navigation -->
    <aside><%= partial("admin/nav") %></aside>

    <!-- Users Management Content -->
    <main id="main-content">
        <!-- Admin Users Management (HTMX Partial) -->
        <header class="admin-header mb-2">
            <div>
                <h1>
                    <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                        <circle cx="9" cy="7" r="4" />
                        <path d="m22 21-3-3 3-3" />
                    </svg>
                    User Management
                </h1>
                <p>Manage user accounts, roles, and permissions</p>
            </div>
            <div>
                <a
                    href="/admin/users/new"
                    role="button"
                    class="primary"
                   
                   
                   
                >
                    + Add New User
                </a>
            </div>
        </header>

        <%= if (len(users) > 0) { %>
        <article>
            <header>
                <h3>
                    <svg
                        width="18"
                        height="18"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        class="icon-spacing"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                        ></path>
                    </svg>
                    All Users (<%= len(users) %>)
                </h3>
            </header>

            <figure>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Created</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <%= for (user) in users { %>
                        <tr>
                            <td>
                                <strong
                                    ><%= user.FirstName %> <%= user.LastName
                                    %></strong
                                >
                            </td>
                            <td><%= user.Email %></td>
                            <td>
                                <%= if (user.Role == "admin") { %>
                                <span class="admin-role">Admin</span>
                                <% } else { %>
                                <span class="user-role">User</span>
                                <% } %>
                            </td>
                            <td><%= user.CreatedAt.Format("Jan 2, 2006") %></td>
                            <td>
                                <div class="action-group flex-gap-sm">
                                    <a
                                        href="/admin/users/<%= user.ID %>"
                                        role="button"
                                        class="outline btn-sm"
                                       
                                       
                                       
                                        >View</a
                                    >
                                    <a
                                        href="/admin/users/<%= user.ID %>/edit"
                                        role="button"
                                        class="secondary outline btn-sm"
                                       
                                       
                                       
                                        >Edit</a
                                    >
                                    <button
                                       
                                       
                                       
                                       
                                        role="button"
                                        class="contrast outline btn-sm"
                                    >
                                        Delete
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <% } %>
                    </tbody>
                </table>
            </figure>

            <%= if (pagination && pagination.TotalPages > 1) { %>
            <footer class="flex-center mt-1">
                <nav aria-label="User list pagination">
                    <%= if (pagination.Page > 1) { %>
                    <a
                        href="/admin/users?page=<%= pagination.Page - 1 %>"
                       
                       
                       
                        >Previous</a
                    >
                    <% } %> Page <%= pagination.Page %> of <%=
                    pagination.TotalPages %> <%= if (pagination.Page <
                    pagination.TotalPages) { %>
                    <a
                        href="/admin/users?page=<%= pagination.Page + 1 %>"
                       
                       
                       
                        >Next</a
                    >
                    <% } %>
                </nav>
            </footer>
            <% } %>
        </article>
        <% } else { %>
        <article>
            <header>
                <h3>No Users Found</h3>
            </header>
            <p>No users have been created yet.</p>
            <footer>
                <a
                    href="/admin/users/new"
                    role="button"
                    class="primary"
                   
                   
                   
                >
                    Create First User
                </a>
            </footer>
        </article>
        <% } %>
    </main>
</div>
