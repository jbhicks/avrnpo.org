<!-- Enhanced Header -->
<header class="container-fluid site-header" hx-preserve="true">
  <nav>
    <ul>
      <li>
        <!-- This link should probably load the initial content into #htmx-content if clicked -->
        <a href="/" hx-get="/" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true"> 
          <svg style="margin-right: 8px;" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4M4 7v10l8 4m0-10L4 7m8 4v10"></path> </svg> 
          <strong>Buffalo SaaS</strong> 
        </a>
      </li>
    </ul>
    <ul>
      <%= if (current_user) { %>
        <li><a href="/dashboard" hx-get="/dashboard" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true">Dashboard</a></li>
        <li><a href="/account" hx-get="/account" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true">Account</a></li>
        <li>
          <button class="theme-toggle-btn" onclick="toggleTheme();" aria-label="Toggle theme" title="Toggle theme">
            <span id="theme-icon-header"> <!-- Changed ID -->
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
              </svg>
            </span>
          </button>
        </li>
        <li>
          <details class="dropdown">
            <summary role="button">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
              Profile
            </summary>
            <ul>
              <li><a href="/profile" hx-get="/profile" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true">Your Profile</a></li>
              <li><a href="/account" hx-get="/account" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true">Settings</a></li>
              <li><a href="/signout" class="secondary" hx-post="/signout" hx-confirm="Are you sure you want to sign out?">Sign out</a></li>
            </ul>
          </details>
        </li>
      <% } else { %>
        <li>
          <button class="theme-toggle-btn" aria-label="Toggle theme" title="Toggle theme"> 
            <span id="theme-icon"> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path> </svg> </span> 
          </button>
        </li>
        <li>
          <a href="/auth/new" role="button" class="btn-primary" aria-label="Login" title="Login" hx-get="/auth/new" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true"> 
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path> </svg> 
          </a>
        </li>
        <li>
          <a href="/users/new" role="button" class="btn-primary" aria-label="Sign Up" title="Sign Up" hx-get="/users/new" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true"> 
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path> </svg> 
          </a>
        </li>
      <% } %>
    </ul>
  </nav>
</header>

<!-- HTMX Content Target -->
<main class="container" id="htmx-content">
  <!-- Initial content of the homepage will be loaded here by default, -->
  <!-- or fetched if the user navigates directly to / -->
  <section>
    <h2>Technology Stack</h2>
    <figure>
      <table>
        <thead>
          <tr>
            <th scope="col">Component</th>
            <th scope="col">Technology</th>
            <th scope="col">Purpose</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Backend Framework</td>
            <td>Go Buffalo v0.18+</td>
            <td>Web framework with routing, middleware, templating</td>
          </tr>
          <tr>
            <td>Database</td>
            <td>PostgreSQL 13+</td>
            <td>User data storage, migrations with Pop/Soda</td>
          </tr>
          <tr>
            <td>Authentication</td>
            <td>Buffalo Auth</td>
            <td>Session-based auth with bcrypt password hashing</td>
          </tr>
          <tr>
            <td>Frontend</td>
            <td>Pico.css v2</td> <!-- HTMX will be added here -->
            <td>Semantic CSS framework with dark/light themes</td>
          </tr>
          <tr>
            <td>Templates</td>
            <td>Plush</td>
            <td>Go templating with layout inheritance</td>
          </tr>
          <tr>
            <td>Development</td>
            <td>Docker Compose</td>
            <td>Local development environment with hot reload</td>
          </tr>
          <tr>
            <td>SEO & Performance</td>
            <td>Meta Tags + Structured Data</td>
            <td>Search engine optimization with social media previews</td>
          </tr>
        </tbody>
      </table>
    </figure>
  </section>

  <!-- Features Implemented -->
  <section>
    <h2>Features Implemented</h2>
    <div class="grid">
      <article>
        <header>
          <h3>üîê Authentication System</h3>
        </header>
        <ul>
          <li>User registration with email validation</li>
          <li>Secure login/logout with session management</li>
          <li>Password hashing with bcrypt</li>
          <li>Form validation and error handling</li>
        </ul>
      </article>
      
      <article>
        <header>
          <h3>üë§ User Management</h3>
        </header>
        <ul>
          <li>Personal dashboard with account overview</li>
          <li>Profile editing (name, email)</li>
          <li>Password change functionality</li>
          <li>Account information display</li>
        </ul>
      </article>
      
      <article>
        <header>
          <h3>üé® Frontend & UX</h3>
        </header>
        <ul>
          <li>Responsive design with Pico.css</li>
          <li>Dark/light/auto theme switching</li>
          <li>Semantic HTML structure</li>
          <li>Accessible form components</li>
        </ul>
      </article>
      
      <article>
        <header>
          <h3>üîç SEO & Performance</h3>
        </header>
        <ul>
          <li>Search engine optimized meta tags</li>
          <li>Open Graph social media previews</li>
          <li>XML sitemap and robots.txt</li>
          <li>Structured data (JSON-LD schema)</li>
        </ul>
      </article>
    </div>
  </section>

  <!-- Available Routes -->
  <section>
    <h2>Available Routes</h2>
    <figure>
      <table>
        <thead>
          <tr>
            <th scope="col">Route</th>
            <th scope="col">Method</th>
            <th scope="col">Purpose</th>
            <th scope="col">Auth Required</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>/</code></td>
            <td>GET</td>
            <td>Homepage (this page)</td>
            <td>No</td>
          </tr>
          <tr>
            <td><code>/auth/new</code></td>
            <td>GET</td>
            <td>Login form</td>
            <td>No</td>
          </tr>
          <tr>
            <td><code>/auth</code></td>
            <td>POST</td>
            <td>Process login</td>
            <td>No</td>
          </tr>
          <tr>
            <td><code>/auth/signout</code></td>
            <td>DELETE</td>
            <td>Logout user</td>
            <td>Yes</td>
          </tr>
          <tr>
            <td><code>/users/new</code></td>
            <td>GET</td>
            <td>Registration form</td>
            <td>No</td>
          </tr>
          <tr>
            <td><code>/users</code></td>
            <td>POST</td>
            <td>Create new user</td>
            <td>No</td>
          </tr>
          <tr>
            <td><code>/dashboard</code></td>
            <td>GET</td>
            <td>User dashboard</td>
            <td>Yes</td>
          </tr>
          <tr>
            <td><code>/users/account</code></td>
            <td>GET</td>
            <td>Account settings</td>
            <td>Yes</td>
          </tr>
          <tr>
            <td><code>/users/profile</code></td>
            <td>GET</td>
            <td>Profile settings</td>
            <td>Yes</td>
          </tr>
        </tbody>
      </table>
    </figure>
  </section>

  <!-- Getting Started -->
  <section>
    <h2>Getting Started</h2>
    <div class="grid">
      <article>
        <header>
          <h3>üöÄ Quick Start</h3>
        </header>
        <ol>
          <li>Clone the repository</li>
          <li>Run <code>docker-compose up</code></li>
          <li>Visit <code>http://localhost:3000</code></li>
          <li>Create an account or login</li>
        </ol>
      </article>
      
      <article>
        <header>
          <h3>üõ†Ô∏è Development</h3>
        </header>
        <ol>
          <li>Install Go 1.21+ and Buffalo CLI</li>
          <li>Set up PostgreSQL database</li>
          <li>Run migrations: <code>buffalo pop migrate</code></li>
          <li>Start dev server: <code>buffalo dev</code></li>
        </ol>
      </article>
      
      <article>
        <header>
          <h3>üìù Customization</h3>
        </header>
        <ul>
          <li>Edit templates in <code>/templates</code></li>
          <li>Modify styles with CSS variables</li>
          <li>Add routes in <code>/actions/app.go</code></li>
          <li>Extend models in <code>/models</code></li>
        </ul>
      </article>
    </div>
  </section>
</main>

<!-- Footer -->
<!-- The footer might also be part of the static shell or loaded with content. -->
<!-- For simplicity, let's assume it's part of the static shell for now. -->
<footer class="container" hx-preserve="true">
  <small>
    <!-- These links should also be HTMX enabled if they point to internal pages -->
    <a href="/dashboard" hx-get="/dashboard" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true">Dashboard</a> ‚Ä¢ 
    <a href="/auth/new" hx-get="/auth/new" hx-target="#htmx-content" hx-swap="innerHTML" hx-push-url="true">Login</a> ‚Ä¢ 
    <a href="https://github.com/gobuffalo/buffalo" target="_blank">Buffalo Framework</a>
  </small>
  <small>Built with <a href="https://gobuffalo.io" target="_blank">Buffalo</a> and <a href="https://picocss.com" target="_blank">Pico.css</a></small>
</footer>

<script>
  // Optional: If you want to ensure the initial content for '/' is loaded via HTMX
  // even on a direct page load, you could do something like this.
  // However, for the very first load, rendering it directly as part of index.plush.html is fine.
  // document.addEventListener('DOMContentLoaded', function() {
  //   if (window.location.pathname === '/') {
  //     htmx.ajax('GET', '/home/index_content', '#htmx-content');
  //   }
  // });
</script>
