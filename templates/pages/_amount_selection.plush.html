<div id="amount-selection">
  <%= csrf() %>
  <input type="hidden" name="donation_type" value="<%= donationType %>">
  <input type="hidden" name="amount" id="selected-amount" value="<%= if (amount && amount != "") { %><%= amount %><% } else if (customAmount && customAmount != "") { %><%= customAmount %><% } else { %><%# empty to avoid nil %><% } %>">
  
  <div class="amount-grid" role="radiogroup" aria-label="Donation amount">
    <% let presetAmounts = ["25", "50", "100", "250", "500", "1000"] %>
    <%= for (preset) in presetAmounts { %>
      <% let isActive = ((amount && amount != "" && amount == preset) || (!amount && customAmount && customAmount == preset)) %>
      <% let btnClass = "outline amount-btn" %>
      <% if (isActive) { btnClass = btnClass + " active" } %>
      <button type="button"
              class="<%= btnClass %>"
              data-amount="<%= preset %>"
              aria-pressed="<%= if (isActive) { %>true<% } else { %>false<% } %>"
              onclick="selectAmount('<%= preset %>')">
        $<%= preset %>
      </button>
    <% } %>
  </div>

  <div class="custom-amount-group" style="margin-top:1em;">
    <label for="custom_amount">Or enter a custom amount</label>
    <input type="number"
           id="custom_amount"
           name="custom_amount"
           autocomplete="transaction-amount"
           placeholder="Enter custom amount"
           step="1"
           min="1"
    <input type="number"
           id="custom_amount"
           name="custom_amount"
           placeholder="Enter amount"
           min="1"
           step="0.01"
           value="<%= if (amount && amount != "") { %><%= amount %><% } else if (customAmount && customAmount != "") { %><%= customAmount %><% } %>"
           oninput="selectCustomAmount(this.value)">
    <%= if (hasAmountError) { %>
      <small class="error" style="color: var(--pico-del-color); display:block; margin-top: .25rem;">
        <%= errors.Get("amount")[0] %>
      </small>
    <% } %>
  </div>
</div>

<style>
/* Active state for amount buttons */
.amount-btn.active {
  background-color: var(--pico-primary) !important;
  border-color: var(--pico-primary) !important;
  color: var(--pico-primary-inverse) !important;
}

/* Ensure outline buttons have proper hover/focus states */
.amount-btn.outline:hover {
  background-color: var(--pico-primary-hover);
  border-color: var(--pico-primary-hover);
  color: var(--pico-primary-inverse);
}

/* Custom amount input uses default styling; no active background */
</style>
